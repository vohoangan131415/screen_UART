#include "statusdisplay.h"
#include "address.h"
#include "stm32f1xx.h"

displayContentstatus status_dis_store;

displayContentstatus create_displaystatus() {
    displayContentstatus status = {
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x77, 0x6f, 0x72, 0x6b, 0x69, 0x6e, 0x67, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // working
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x73, 0x75, 0x63, 0x63, 0x65, 0x73, 0x73, 0x66, 0x75, 0x6c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // successful
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x66, 0x61, 0x69, 0x6c, 0x65, 0x64, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // failed
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x65, 0x72, 0x72, 0x6f, 0x72, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // error
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x63, 0x6c, 0x6f, 0x73, 0x65, 0x64, 0x6c, 0x6f, 0x6f, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},// Closed_loop
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x69, 0x64, 0x6c, 0x65, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},// IDLE
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x75, 0x6e, 0x6b, 0x6e, 0x6f, 0x77, 0x6e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},// UNKNOWN
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x6e, 0x6f, 0x74, 0x65, 0x6e, 0x6f, 0x75, 0x67, 0x68, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},// chua du du lieu ( address #)
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x65, 0x6e, 0x6f, 0x75, 0x67, 0x68, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},//  du du lieu ( address #)
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x4E, 0x2F, 0x41, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},//  NA 
        {0x5a, 0xa5, 0x14, 0x82, address, 0x00, 0x77, 0x61, 0x69, 0x74, 0x69, 0x6E, 0x67, 0x20, 0x74, 0x6F, 0x20, 0x73, 0x65, 0x74, 0x20, 0x75, 0x70}//  starting annouce
    };
    return status;
}

void status_display(uint8_t status1) {
    status_dis_store = create_displaystatus();
    switch (status1) {
        case SUCCESSFUL:
            HAL_UART_Transmit(&huart2, status_dis_store.successful, sizeof(status_dis_store.successful), HAL_MAX_DELAY);
						
            break;
        case FAILED:
            HAL_UART_Transmit(&huart2, status_dis_store.failed, sizeof(status_dis_store.failed), HAL_MAX_DELAY);
            break;
        case WORKING:
            HAL_UART_Transmit(&huart2, status_dis_store.working, sizeof(status_dis_store.working), HAL_MAX_DELAY);
            
						break;
        case ERROR:
            HAL_UART_Transmit(&huart2, status_dis_store.error, sizeof(status_dis_store.error), HAL_MAX_DELAY);
            break;
        case CLOSED_LOOP:
            HAL_UART_Transmit(&huart2, status_dis_store.closed_loop, sizeof(status_dis_store.closed_loop), HAL_MAX_DELAY);
            break;
        case IDLE:
            HAL_UART_Transmit(&huart2, status_dis_store.idle, sizeof(status_dis_store.idle), HAL_MAX_DELAY);
            break;
        case UNKNOWN:
            HAL_UART_Transmit(&huart2, status_dis_store.unknown_status, sizeof(status_dis_store.unknown_status), HAL_MAX_DELAY);
            break;
				 case NA:
            HAL_UART_Transmit(&huart2, status_dis_store.NAstatus, sizeof(status_dis_store.NAstatus), HAL_MAX_DELAY);
            break;
				 case StartSetup:
            HAL_UART_Transmit(&huart2, status_dis_store.StartingAnnouce, sizeof(status_dis_store.StartingAnnouce), HAL_MAX_DELAY);
            break;
	}	
	}
